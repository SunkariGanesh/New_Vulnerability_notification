import requests
from os import system
import webbrowser
from time import localtime,sleep
print localtime()
from bs4 import BeautifulSoup
s=requests.session()
def check_id(data):
    c=0
    f=open('cvelistmay.txt','a+')
    for i in f.readlines():
        if data in i:
            c=c+1
        else:
            c=c
    if c>0:
        print "False"

    else:
        print "new cve found"+data
        webbrowser.open("C:\Python27\ganesh.mp3")
        f.write(data)
        f.write('\n')
    f.close()
            
    
while(1):
    k=s.get('https://www.cvedetails.com/vulnerability-list/year-2018/month-5/May.html')
    soup=BeautifulSoup(k.text,'html.parser')
    tab=soup.findAll('table',{'id':'vulnslisttable','class':'searchresults sortable'})
    tr=(tab[0].findAll('tr'))
    for i in range(1,len(tr),2):
        cve=tr[i].findAll('a')[1].text
        cve=cve.encode('ascii','ignore')
        check_id(cve)
        sleep(5)

    


